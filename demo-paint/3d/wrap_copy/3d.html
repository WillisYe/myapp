<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="3d.css">
</head>

<body>
  <div id="app"></div>
  <div id="itemsWrapper">
    <figure class="grid__item">
      <img class="grid__item-img" src="img/1.jpg" alt="An image" />
      <img class="grid__item-img grid__item-img--large" src="img/1_large.jpg" />
      <figcaption class="grid__item-caption">
        <h2 class="grid__item-title">Our Item Title</h2>
        <p class="grid__item-text">
          Our Item Description
        </p>
      </figcaption>
    </figure>
  </div>
  <script src="js/imagesloaded.pkgd.min.js"></script>
  <script src="js/three.min.js"></script>
  <script src="js/TweenLite.min.js"></script>
  <script src="js/CSSPlugin.min.js"></script>
  <script src="js/EasePack.min.js"></script>
  <script src="js/dat-gui.min.js"></script>
  <script src="js/Configurator.js"></script>
  <script src="js/GridToFullscreenEffect.js"></script>
  <script src="js/basicDemo.js"></script>
  <script>
    const itemsWrapper = document.getElementById('items-wrap');

    const configurator = createDemoConfigurator({
      activation: { type: "side", props: { top: true, bottom: true } },
      timing: {
        type: "sections",
        props: {
          sections: 4,
        }
      },
      transformation: { type: 'simplex' },
      duration: 1.8,
      easings: {
        toFullscreen: Cubic.easeInOut,
        toGrid: Cubic.easeInOut
      }

    })
    imagesLoaded(document.querySelectorAll("img"), instance => {

      //https://www.techrepublic.com/article/preloading-and-the-javascript-image-object/
      document.body.classList.remove("loading");
      let images = [];
      for (var i = 0, imageSet = {}; i < instance.elements.length; i++) {
        let image = {
          element: instance.elements[i],
          image: instance.images[i].isLoaded ? instance.images[i].img : null
        };
        if (i % 2 === 0) {
          imageSet = {};
          imageSet.small = image;
        }

        if (i % 2 === 1) {
          imageSet.large = image;
          images.push(imageSet);
        }
      }
      configurator.effect.createTextures(images);
    });
  </script>
</body>

</html>